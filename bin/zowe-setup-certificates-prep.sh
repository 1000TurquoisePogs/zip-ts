#!/bin/sh

sed \
  -e "s#HOSTNAME=#HOSTNAME=${ZOWE_EXPLORER_HOST}#" \
  -e "s#IPADDRESS=#IPADDRESS=${ZOWE_IP_ADDRESS}#" \
  -e "s#VERIFY_CERTIFICATES=true#VERIFY_CERTIFICATES=${ZOWE_APIM_VERIFY_CERTIFICATES}#" \
  -e "s#ZOSMF_KEYRING=IZUKeyring.IZUDFLT#ZOSMF_KEYRING=${ZOWE_ZOSMF_KEYRING}#" \
  -e "s#ZOSMF_USER=IZUSVR#ZOSMF_USER=${ZOWE_ZOSMF_USERID}#" \
  -e "s#EXTERNAL_CERTIFICATE=#EXTERNAL_CERTIFICATE=${ZOWE_APIM_EXTERNAL_CERTIFICATE}#" \
  -e "s#EXTERNAL_CERTIFICATE_ALIAS=#EXTERNAL_CERTIFICATE_ALIAS=${ZOWE_APIM_EXTERNAL_CERTIFICATE_ALIAS}#" \
  -e "s#EXTERNAL_CERTIFICATE_AUTHORITIES=#EXTERNAL_CERTIFICATE_AUTHORITIES="\'"${ZOWE_APIM_EXTERNAL_CERTIFICATE_AUTHORITIES}"\'"#" \
  -e "s#KEYSTORE_DIRECTORY=/global/zowe/keystore#KEYSTORE_DIRECTORY=${KEYSTORE_DIRECTORY}#" \
  -e "s#ZOWE_USER_ID=IZUSVR#ZOWE_USER_ID=${ZOWE_USER_ID}#" \
  -e "s#ZOWE_GROUP_ID=IZUADMIN#ZOWE_GROUP_ID=${ZOWE_GROUP_ID}#" \
  "${ZOWE_ROOT_DIR}/bin/zowe-setup-certificates.env" \
  >"${ZOWE_ROOT_DIR}/bin/zowe-setup-certificates.env.temp"

  chmod -R 770 "${ZOWE_ROOT_DIR}/bin/zowe-setup-certificates.env.temp"
